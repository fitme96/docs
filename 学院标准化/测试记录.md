```shell
[root@seclover ~]# ls ansible/
ansible-2.9.27-1.el7.noarch.rpm                               
python-idna-2.4-1.el7.noarch.rpm
libyaml-0.1.4-11.el7_0.x86_64.rpm                             
python-ipaddress-1.0.16-2.el7.noarch.rpm
python2-cryptography-1.7.2-2.el7.x86_64.rpm                   python-jinja2-2.7.2-4.el7.noarch.rpm
python2-httplib2-0.18.1-3.el7.noarch.rpm                      python-markupsafe-0.11-10.el7.x86_64.rpm
python2-jmespath-0.9.4-2.el7.noarch.rpm                       python-paramiko-2.1.1-9.el7.noarch.rpm
python2-pyasn1-0.1.9-7.el7.noarch.rpm                         python-ply-3.4-11.el7.noarch.rpm
python-babel-0.9.6-8.el7.noarch.rpm                           python-pycparser-2.14-1.el7.noarch.rpm
python-backports-1.0-8.el7.x86_64.rpm                         python-setuptools-0.9.8-7.el7.noarch.rpm
python-backports-ssl_match_hostname-3.5.0.1-1.el7.noarch.rpm  python-six-1.9.0-2.el7.noarch.rpm
python-cffi-1.6.0-5.el7.x86_64.rpm                            PyYAML-3.10-11.el7.x86_64.rpm
python-enum34-1.0.4-1.el7.noarch.rpm                          sshpass-1.06-2.el7.x86_64.rpm

```

5月15日上午

1. 修改config.yml
2. genpwd.yml 修改生成目录
3. ansible-playbook genpwd.yml
4. 修改init.yml 增加重启，hostname模块、
5. ansible-playbook init.yml

1. 修改1script


5.30下午测试
```shell
1. 更改 hosts变量
2. host_key_checking = False 修改/etc/ansible/ansible.cfg
3. ansible-playbook genpwd.yml  生成密码
4. ansible-playbook -i hosts init.yml 所有主机初始化后重启/重新登录会话
5. ansible-playbook -i hosts all-in.yml 部署all-in.yml controller
6. ansible-playbook -i hosts compute/compute.yml
## 控制节点执行，同步数据 
su -s /bin/sh -c "nova-manage api_db sync" nova
su -s /bin/sh -c "nova-manage db sync" nova
```

和之前配置不同
limit.conf * hard nofile  20480000 改为1048576 最大

问题: 已解决
1. 更改mysql.service 通过template完成
2. rabbitmq-server.service  通过template完成

TODO
3script/1.yml 中blockline 未实现幂等性 使用regexp替换
