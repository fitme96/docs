在docker/k8s中只要容器主进程还在运行，他们会认为容器是健康的(Always)，所以在生产环境中我们有必要增加存活探针。默认没有增加就绪探针时k8s会立即把创建的pod加入endpoints，如果pod启动时间久(可提供服务)这时客户端会被拒绝访问，所以在生产环境中增加就绪探针是必须的。

---

## 存活探针

存活探针是检查容器是否正在正确运行，如果探测失败，会重启容器。

三种探测容器机制

1.  HTTP GET  2xx/3xx为正确响应，其他都会导致容器重启
2.  TCP套接字 建立tcp连接探测成功，否则失败重启容器
3.  Exec探针  在容器内执行命令，命令返回状态码非0会重启容器

存活探针描述:  livenessProbe

---

## 就绪探针

就绪探针是保障已经可以正确接收请求的pod加入Service提供服务，如果探测失败pod不会成为Service的endPoint

同存活探针一样有三种探测机制

就绪探针描述:   readinessProbe