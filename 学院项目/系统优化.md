

```shell
## /etc/security/limits.conf 
echo "* soft nofile 2048000" >>/etc/security/limits.conf
echo "* hard nofile 20480000" >>/etc/security/limits.conf
echo "* soft nproc 65535" >>/etc/security/limits.conf
echo "* hard nproc 65535" >>/etc/security/limits.conf
echo "mysql hard nofile 65535" >>/etc/security/limits.conf

```
```shell
## /etc/sysctl.conf
echo "net.ipv4.ip_local_port_range = 10240 65535" >> /etc/sysctl.conf
echo "fs.file-max = 304857501" >> /etc/sysctl.conf
echo "fs.nr_open = 204857501" >> /etc/sysctl.conf
#加快TCP回收
echo "net.ipv4.tcp_syncookies = 1" >> /etc/sysctl.conf
echo "net.ipv4.tcp_tw_reuse = 1" >> /etc/sysctl.conf
echo "net.ipv4.tcp_tw_recycle = 1" >> /etc/sysctl.conf
echo "net.ipv4.tcp_fin_timeout = 30" >> /etc/sysctl.conf
echo "fs.inotify.max_user_watches = 262144" >> /etc/sysctl.conf
echo "net.ipv4.ip_forward=1" >> /etc/sysctl.conf
echo "fs.inotify.max_user_watches=1048576" >> /etc/sysctl.conf
echo "fs.inotify.max_user_instances=1048576" >> /etc/sysctl.conf
echo "fs.aio-max-nr=1048576" >> /etc/sysctl.conf

```


## Mysql
```shell
sed -i 's/LimitNOFILE = 5000/LimitNOFILE=65535/g' /usr/lib/systemd/system/mysqld.service
sed -i "61a LimitNPROC=65535" /usr/lib/systemd/system/mysqld.service
```
```shell
# /etc/my.cnf
sed -i "9a validate_password = off" /etc/my.cnf
sed -i "8a max_allowed_packet = 10000M" /etc/my.cnf
sed -i "12a max_connections = 16384" /etc/my.cnf
sed -i "10a net_read_timeout = 300" /etc/my.cnf
sed -i "11a net_write_timeout = 600" /etc/my.cnf
sed -i "18a max_connections = 16384" /etc/my.cnf
```

## rabbitmq-server
```

#LimitNOFILE设置为数字时，可指定为指定的大小，例如1000000
sed -i "17a LimitNOFILE=infinity" /usr/lib/systemd/system/rabbitmq-server.service
systemctl --system daemon-reload
systemctl restart rabbitmq-server.service
```